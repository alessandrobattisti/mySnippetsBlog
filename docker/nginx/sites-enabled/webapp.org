server {
    listen 80;
    server_name localhost;#XX-- TO BE CHANGED --XX;
    charset utf-8;
    ##GZIP SETTINGS##

    gzip on;
    gzip_vary on;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
    gzip_types "*"

    ##MAX UPLOADS SIZE##

    client_header_buffer_size 64k;
    large_client_header_buffers 4 64k;
    client_max_body_size 1m;

    ##LOCATIONS##

    location /api {
      if ($dont_log_ua) {
        access_log off;
      }
      if ($ignore_ua) {
        access_log off;
        return 200;
      }
      if ($block_ua) {
        access_log off;
        return 404;
      }
      access_log /webapp/logs/nginx-access.log;
      error_log /webapp/logs/nginx-error.log;
      proxy_pass http://web:8000;
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    location / {
        error_log /webapp/logs/nginx-error.log;
        expires 30d;
        root /webapp/frontEnd/;
        try_files $uri /index.html;
    }

    location /robots.txt {
     expires 7d;
     alias /webapp/robots/robots.txt;
    }

    location /cgi-bin {
         access_log off;
         return 404;
    }
}
